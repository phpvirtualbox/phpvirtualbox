<!--

	VM System Settings
	Copyright (C) 2010-2015 Ian Moore (imoore76 at yahoo dot com)
	
	$Id: settingsSystem.html 597 2015-04-20 11:41:28Z imoore76 $

-->

<ul>
	<li><a href="#vboxSettingsTabSystemMotherboard"><span class='translate'>Motherboard</span></a></li>
	<li><a href="#vboxSettingsTabSystemProcessor"><span class='translate'>Processor</span></a></li>
	<li><a href="#vboxSettingsTabSystemAcceleration"><span class='translate'>Acceleration</span></a></li>
</ul>

<!-- Motherboard Tab -->
<div id='vboxSettingsTabSystemMotherboard' title='Motherboard'>
<table style='width: 100%'>
	<tr>
		<th style='text-align:right'><span class='translate'>Base Memory:</span></th>
		<td style='width: 100%; white-space: nowrap'>
			<table style='width: 100%'>
			<tr>
				<td style='width: 100%; border: 0px; margin: 0px; padding: 0px;'>
				   <div style='margin-top: 4px' id='vboxSettingsSystemMemory' class='slider'><div class='sliderScale'></div></div>
				</td>
				<td><input type='text' class='vboxText sliderValue' name='vboxSettingsSystemMemoryValue' size='5' /> <span class='translate'>MB</span></td>
			</tr>
			<tr style='vertical-align: top;'>
				<td style='border: 0px; margin: 0px; padding: 0px;'>
				<table style='width: 100%; border: 0px; margin: 0px; padding: 0px;'>
					<tr style='vertical-align: top'>
						<td style='text-align: left;'><span class='vboxSliderMin'>%1 MB</span></td>
						<td style='text-align: right;'><span class='vboxSliderMax'>%1 MB</span></td>
					</tr>
				</table>
				</td>
				<td></td>
			</tr>
		</table>
		</td>
	</tr>
	<tr class='vboxSettingsSystemAdvancedOnly'>
		<th></th>
		<td><label><input type='checkbox' class='vboxCheckbox' name='vboxSettingsSystemPageFusion' /> <span class='translate'>Enable Page Fusion</span></label></td>
	</tr>	
	<tr style='vertical-align: top'>
		<th style='text-align:right'><span class='translate'>Boot Order:</span></th>
		<td>
			<table id='vboxVMBootOrder'>
				<tr style='vertical-align: top'>
					<td style='width: auto'>
						<ul class='vboxList vboxHover vboxBordered' id='vboxVMBootOrderList' style='margin: 0px; padding: 2px; white-space: nowrap; width: 200px'>
							<li id='HardDisk'><input type='checkbox' class='vboxCheckbox' name='vboxSettingsBootHardDisk' /> <img src="images/vbox/hd_16px.png" /> <span class='vboxBootOrderDevice'>HardDisk</span></li>
							<li id='DVD'><input type='checkbox' class='vboxCheckbox' name='vboxSettingsBootDVD' /> <img src="images/vbox/cd_16px.png" /> <span class='vboxBootOrderDevice'>DVD</span></li>
							<li id='Floppy'><input type='checkbox' class='vboxCheckbox' name='vboxSettingsBootFloppy' /> <img src="images/vbox/fd_16px.png" /> <span class='vboxBootOrderDevice'>Floppy</span></li>
							<li id='Network'><input type='checkbox' class='vboxCheckbox' name='vboxSettingsBootNetwork' /> <img src="images/vbox/nw_16px.png" /> <span class='vboxBootOrderDevice'>Network</span></li>
						</ul>
					</td>
					<td style='text-align: left; width: 100%'>
						<input disabled='disabled' class="imgMvUp vboxImgButton" style='background: url(images/vbox/list_moveup_disabled_16px.png) 1px 1px no-repeat; width: 18px; height: 18px; vertical-align:bottom' type="button" value="" />
						<br />
						<input disabled='disabled' class="imgMvDn vboxImgButton" style='background: url(images/vbox/list_movedown_disabled_16px.png) 1px 1px no-repeat; width: 18px; height: 18px; vertical-align:bottom' type="button" value="" />
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr id='vboxSettingsSystemChipsetRow'>
		<th style='text-align:right'><span class='translate'>Chipset:</span></th>
		<td><select name='vboxSettingsSystemChipset'>
				<option value='PIIX3'>PIIX3</option>
				<option value='ICH9'>ICH9</option>
			</select>
		</td>
	</tr>	
	<tr>
		<th style='text-align:right'><span class='translate'>Extended Features:</span></th>
		<td><label><input type='checkbox' class='vboxCheckbox' name='vboxSettingsSystemIOAPIC' /> <span class='translate'>Enable I/O APIC</span></label></td>
	</tr>
	<tr>
		<th></th>
		<td><label><input type='checkbox' class='vboxCheckbox' name='vboxSettingsSystemEFI' /> <span class='translate'>Enable EFI (special OSes only)</span></label></td>
	</tr>
	<tr>
		<th></th>
		<td><label><input type='checkbox' class='vboxCheckbox' name='vboxSettingsSystemRTCUseUTC' /> <span class='translate'>Hardware Clock in UTC Time</span></label></td>
	</tr>
	<tr class='vboxSettingsSystemAdvancedOnly'>
		<th></th>
		<td><label><input type='checkbox' class='vboxCheckbox' name='vboxSettingsSystemDisableHostTimeSync' /> <span class='translate'>Disable host time sync</span></label></td>
	</tr>	
	<tr class='vboxSettingsSystemAdvancedOnly'>
		<th></th>
		<td><label><input type='checkbox' class='vboxCheckbox' name='vboxSettingsSystemHPET' /> <span class='translate'>HPET (high precision event timer)</span></label></td>
	</tr>

</table>
</div>

<!-- Processor Tab -->
<div id='vboxSettingsTabSystemProcessor' title='Processors'>
<table style='width: 100%'>
	<tr>
		<th style='text-align:right'><span class='translate'>Processor(s):</span></th>
		<td style='width: 100%; white-space: nowrap'>
		<table style='width: 100%'>
			<tr>
				<td style='width: 100%; border: 0px; margin: 0px; padding: 0px;'>
				   <div style='margin-top: 4px' id='vboxSettingsSystemProcessor' class='slider'><div class='sliderScale'></div></div>
				</td>
				<td><input type='text' class='vboxText' name='vboxSettingsSystemProcessorValue' size='2' class='sliderValue' /></td>
			</tr>
			<tr style='vertical-align: top;'>
				<td style='border: 0px; margin: 0px; padding: 0px;'>
                   <table style='width: 100%; border: 0px; margin: 0px; padding: 0px;'>
					<tr style='vertical-align: top'>
						<td style='text-align: left;'><span class='vboxSliderMin'>%1 CPU</span></td>
						<td style='text-align: right;'><span class='vboxSliderMax'>%1 CPUs</span></td>
					</tr>
				   </table>
				</td>
				<td></td>
			</tr>
		</table>

		</td>
	</tr>
	<tr class='vboxRunningEnabled'>
		<th style='text-align:right'><span class='translate'>Execution Cap:</span></th>
		<td style='width: 100%; white-space: nowrap'>
		<table style='width: 100%'>
			<tr class='vboxRunningEnabled'>
				<td style='width: 100%; border: 0px; margin: 0px; padding: 0px;'>
				   <div style='margin-top: 4px' id='vboxSettingsSystemProcessorCap' class='slider'><div class='sliderScale'></div></div>
				</td>
				<td><input type='text' class='vboxText vboxRunningEnabled' name='vboxSettingsSystemProcessorCapValue' size='3' class='sliderValue' /></td>
			</tr>
			<tr style='vertical-align: top;' class='vboxRunningEnabled'>
				<td style='border: 0px; margin: 0px; padding: 0px;'>
                   <table style='width: 100%; border: 0px; margin: 0px; padding: 0px;'>
					<tr style='vertical-align: top' class='vboxRunningEnabled'>
						<td style='text-align: left;'><span class='vboxSliderMin' title='Min CPU execution cap in %'>%1%</span></td>
						<td style='text-align: right;'><span class='vboxSliderMax' title='Max CPU execution cap in %'>%1%</span></td>
					</tr>
				   </table>
				</td>
				<td></td>
			</tr>
		</table>

		</td>
	</tr>
	
	<tr id='vboxSettingsSystemPAERow'>
		<th><span class='translate'>Extended Features:</span></th>
		<td><label><input type='checkbox' class='vboxCheckbox' name='vboxSettingsSystemPAE' /> <span class='translate'>Enable PAE/NX</span></label></td>
	</tr>
	<tr id='vboxSettingsSystemNestedVTRow'>
		<th></th>
		<td><label><input type='checkbox' class='vboxCheckbox' name='vboxSettingsSystemNestedVT' /> <span class='translate'>Enable Nested VT-x/AMD-V</span></label></td>
	</tr>
</table>
</div>

<!-- Acceleration Tab -->
<div id='vboxSettingsTabSystemAcceleration' title='Acceleration'>
<table>
    <tr>
        <th class='vboxEnablerIgnore'><span class='translate'>Paravirtualization Interface:</span></th>
        <td><select name='vboxSettingsParavirtInterface' class='vboxEnablerIgnore'>
            <option value='None'>None</option>
            <option value='Default'>Default</option>
            <option value='Legacy'>Legacy</option>
            <option value='Minimal'>Minimal</option>
            <option value='HyperV'>HyperV</option>
            <option value='KVM'>KVM</option>
        </select></td>
	<tr>
		<th style='text-align:right' class='vboxEnablerIgnore vboxSettingsAccelRequired'><span class='translate'>Hardware Virtualization:</span></th>
		<td style='width:100%'><label><input type='checkbox' name='settingsSystemVT' class='vboxEnablerCheckbox vboxSettingsAccelRequired'/>
		  <span class='translate vboxSettingsAccelRequired'>Enable VT-x/AMD-V</span></label></td>
	</tr>
	<tr>
		<th></th>
		<td><label><input type='checkbox' name='settingsSystemPaging' class='vboxEnablerListen' /> <span class='translate vboxEnablerListen'>Enable Nested Paging</span></label></td>
	</tr>
	<tr class='vboxSettingsSystemAdvancedOnly'>
		<th></th>
		<td><label><input type='checkbox' name='settingsSystemLargePages' class='vboxEnablerListen'/> <span class='translate vboxEnablerListen'>Enable Large Pages</span></label></td>
	</tr>
	<tr class='vboxSettingsSystemAdvancedOnly'>
		<th></th>
		<td><label><input type='checkbox' name='settingsSystemUnrestrictedExecution' class='vboxEnablerListen'/> <span class='translate vboxEnablerListen'>Enable VT-x unrestricted execution</span></label></td>
	</tr>   
	<tr class='vboxSettingsSystemAdvancedOnly'>
		<th></th>
		<td><label><input type='checkbox' name='settingsSystemVPID' class='vboxEnablerListen'/> <span class='translate vboxEnablerListen'>Enable VT-x VPID (Intel only)</span></label></td>
	</tr>                   
</table>
</div>


<script type='text/javascript'>

/* Boot order devices */
$('#vboxVMBootOrder').find("span.vboxBootOrderDevice").html(function(i,h){return trans(vboxDevice(h),'VBoxGlobal');});

/* Chipsets */
$('#vboxSettingsSystemChipsetRow').find('option').html(function(i,h){return trans(h,'VBoxGlobal');});

/* Paravirtualization providers */
$(document.forms['frmVboxSettings'].vboxSettingsParavirtInterface).find('option').html(function(i,h){return trans(h,'VBoxGlobal', 'ParavirtProvider');});

$('#vboxSettingsSystemMemory').data('form','frmVboxSettings');
$('#vboxSettingsSystemProcessor').data('form','frmVboxSettings');
$('#vboxSettingsSystemProcessorCap').data('form','frmVboxSettings');
$('#vboxSettingsSystemMemory').slider({'min':parseInt($('#vboxPane').data('vboxSystemProperties').minGuestRAM),'max':parseInt($('#vboxSettingsDialog').data('vboxHostDetails').memorySize)});
$('#vboxSettingsSystemProcessor').slider({'min':1,'max':$('#vboxSettingsDialog').data('vboxHostDetails').cpus.length});
$('#vboxSettingsSystemProcessorCap').slider({'min':1,'max':100});


/* Disable PAE if it is unsupported */
if(!$('#vboxSettingsDialog').data('vboxHostDetails').cpuFeatures.PAE) {
	$('#vboxSettingsSystemPAERow span').addClass('disabled');
	document.forms['frmVboxSettings'].vboxSettingsSystemPAE.checked = false;
	document.forms['frmVboxSettings'].vboxSettingsSystemPAE.disabled = true;
}

/* Disable Nested HW Virt if it is unsupported */
if(!$('#vboxSettingsDialog').data('vboxHostDetails').cpuFeatures.NestedHWVirt) {
	$('vboxSettingsSystemNestedVTRow span').addClass('disabled');
	document.forms['frmVboxSettings'].vboxSettingsSystemNestedVT.checked = false;
	document.forms['frmVboxSettings'].vboxSettingsSystemNestedVT.disabled = true;
}

/* Set CPUs to 1 and disable if host cpu does not support HWVirtEx */
if(!$('#vboxSettingsDialog').data('vboxHostDetails').cpuFeatures.HWVirtEx) {
	var pt = $('#vboxSettingsSystemProcessor').slider('value',1).slider('disable').closest('table');
	pt.find('span').addClass('disabled');
	pt.find('input').prop('disabled',true);
}

/** @def VBOX_WITH_PAGE_SHARING
 * Enables the page sharing code.
 * @remarks This must match GMMR0Init; currently we only support page fusion on
 *          all 64-bit hosts except Mac OS X */
if(!$('#vboxSettingsDialog').data('vboxHostDetails').cpuFeatures['Long Mode (64-bit)'] || $('#vboxSettingsDialog').data('vboxHostDetails').operatingSystem.toLowerCase().search("darwin") >-1) {
	$(document.forms['frmVboxSettings'].vboxSettingsSystemPageFusion).prop({'checked':false,'disabled':true}).siblings().addClass('disabled');
}


/*
 * 
 * Ordered lists (Boot order)
 *
 */

$("#vboxVMBootOrder").find("input.imgMvUp").click(function() {

	var list = $('#vboxVMBootOrderList').children('li');

	for(var i = 0; i < list.length; i++ ) {
		if(list[i].className == 'vboxListItemSelected') {
			if(i == 0) return;
			var mv = $(list[i]).detach();
			$(list[(i-1)]).before(mv);
			i = list.length;
			mv.click();
		}
	}
	
});

$("#vboxVMBootOrder").find("input.imgMvDn").click(function() {

	var list = $('#vboxVMBootOrderList').children('li');

	for(var i = 0; i < list.length; i++ ) {

		if(list[i].className == 'vboxListItemSelected') {
			if(i == (list.length - 1)) return;
			var mv = $(list[i]).detach();
			$(list[(i+1)]).after(mv);
			i = list.length;
			mv.click();
		}
	}
	
});

// Preload up / down images
var a = new Image();
a.src = "images/vbox/list_movedown_16px.png";
var b = new Image();
b.src = "images/vbox/list_moveup_16px.png";


/* Update values when data is loaded */
$('#vboxSettingsDialog').on('dataLoaded',function(){
	
	/* System Default values from VM*/
	$('#vboxSettingsSystemMemory').slider('value', parseInt($('#vboxSettingsDialog').data('vboxMachineData').memorySize));
	document.forms['frmVboxSettings'].vboxSettingsSystemIOAPIC.checked = $('#vboxSettingsDialog').data('vboxMachineData').BIOSSettings.IOAPICEnabled;
	document.forms['frmVboxSettings'].vboxSettingsSystemEFI.checked = ($('#vboxSettingsDialog').data('vboxMachineData').firmwareType == 'EFI');
	document.forms['frmVboxSettings'].vboxSettingsSystemRTCUseUTC.checked = ($('#vboxSettingsDialog').data('vboxMachineData').RTCUseUTC);
	$('#vboxSettingsSystemProcessor').slider('value',parseInt($('#vboxSettingsDialog').data('vboxMachineData').CPUCount));
	$('#vboxSettingsSystemProcessorCap').slider('value',parseInt($('#vboxSettingsDialog').data('vboxMachineData').CPUExecutionCap));
	document.forms['frmVboxSettings'].vboxSettingsSystemPAE.checked = ($('#vboxSettingsDialog').data('vboxMachineData').CpuProperties.PAE);
	document.forms['frmVboxSettings'].vboxSettingsSystemNestedVT.checked = ($('#vboxSettingsDialog').data('vboxMachineData').CpuProperties.HWVirt);
	document.forms['frmVboxSettings'].settingsSystemVT.checked = ($('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.Enabled);
	document.forms['frmVboxSettings'].settingsSystemPaging.checked = ($('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.NestedPaging);
	
	$(document.forms['frmVboxSettings'].vboxSettingsParavirtInterface).val($('#vboxSettingsDialog').data('vboxMachineData').paravirtProvider);
	
	$(document.forms['frmVboxSettings'].settingsSystemVT).triggerHandler('click');


	/* Only if acceleration config is enabled */
	if($('#vboxPane').data('vboxConfig').enableAdvancedConfig) {
		
		document.forms['frmVboxSettings'].vboxSettingsSystemHPET.checked = ($('#vboxSettingsDialog').data('vboxMachineData').HPETEnabled);
		document.forms['frmVboxSettings'].vboxSettingsSystemDisableHostTimeSync.checked = ($('#vboxSettingsDialog').data('vboxMachineData').disableHostTimeSync);
		document.forms['frmVboxSettings'].settingsSystemLargePages.checked = ($('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.LargePages);
		document.forms['frmVboxSettings'].settingsSystemUnrestrictedExecution.checked = ($('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.UnrestrictedExecution);
		document.forms['frmVboxSettings'].settingsSystemVPID.checked = ($('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.VPID);
		document.forms['frmVboxSettings'].vboxSettingsSystemPageFusion.checked = ($('#vboxSettingsDialog').data('vboxMachineData').pageFusionEnabled);
		
		$('#vboxSettingsTabSystemMotherboard').find('tr.vboxSettingsSystemAdvancedOnly').css('display','');
		$('#vboxSettingsTabSystemAcceleration').find('tr.vboxSettingsSystemAdvancedOnly').css('display','');
		
		
	/* Else, remove advanced settings */
	} else {
		$('#vboxSettingsTabSystemMotherboard').find('tr.vboxSettingsSystemAdvancedOnly').css('display','none');
		$('#vboxSettingsTabSystemAcceleration').find('tr.vboxSettingsSystemAdvancedOnly').css('display','none');
	}

	/* Boot Order */
	var bootItems = {};
	var bootList = $('#vboxVMBootOrderList');
	$(bootList).children('li').each(function(){
		bootItems[$(this).attr('id')] = $(this).detach();
	});
	for(var i in $('#vboxSettingsDialog').data('vboxMachineData').bootOrder) {
		if(!isNaN(i)) {
			$(bootList).append(bootItems[$('#vboxSettingsDialog').data('vboxMachineData').bootOrder[i]]);
			document.forms['frmVboxSettings'].elements['vboxSettingsBoot' + $('#vboxSettingsDialog').data('vboxMachineData').bootOrder[i]].checked = true;
		}
		delete bootItems[$('#vboxSettingsDialog').data('vboxMachineData').bootOrder[i]];
	}
	for(var i in bootItems) {
		if(typeof i == 'function') continue;
		$(bootList).append(bootItems[i]);
		delete bootItems[i];
	}
	$(bootList).children().hoverClass('vboxHover');

	
	
	/* Hide Chipset selection if we didn't get one, or VirtualBox version is 4.0.0 A safeguard */
	if(!$('#vboxSettingsDialog').data('vboxMachineData').chipsetType) {
		$('#vboxSettingsSystemChipsetRow').css('display','none');
	} else {
		$('#vboxSettingsSystemChipsetRow').css('display','');
		$(document.forms['frmVboxSettings'].vboxSettingsSystemChipset).val($('#vboxSettingsDialog').data('vboxMachineData').chipsetType);
	}

	
	// Full editing not enabled
	var p = $('#vboxSettingsTabSystemMotherboard').parent().children('div'); 
	var t = $('#vboxVMBootOrder');

	if(!$('#vboxSettingsDialog').data('vboxFullEdit')) {
		
		$(p).find('tr:not(.vboxRunningEnabled)').find('span').addClass('disabled');
		$(p).find('tr:not(.vboxRunningEnabled)').find('input,select,textarea').prop('disabled',true);
		$('#vboxSettingsSystemMemory').slider('disable');
		$('#vboxSettingsSystemProcessor').slider('disable');
		
		t.find('input.imgMvUp').css('background-image', 'url(images/vbox/list_moveup_disabled_16px.png)');
		t.find('input.imgMvDn').css('background-image', 'url(images/vbox/list_movedown_disabled_16px.png)');
		t.find('img').each(function(){
			$(this).prop('src',$(this).prop('src').replace('_16','_disabled_16'));
		});
		
		$("#vboxVMBootOrderList").children("li").unbind('click');
		
	} else {
		
		$(p).find('tr:not(.vboxRunningEnabled)').find('span').removeClass('disabled');
		$(p).find('tr:not(.vboxRunningEnabled)').find('input,select,textarea').prop('disabled',false);
		$('#vboxSettingsSystemMemory').slider('enable');
		$('#vboxSettingsSystemProcessor').slider('enable');
		
		t.find('input.imgMvUp').css('background-image', 'url(images/vbox/list_moveup_16px.png)');
		t.find('input.imgMvDn').css('background-image', 'url(images/vbox/list_movedown_16px.png)');
		t.find('img').each(function(){
			$(this).prop('src',$(this).prop('src').replace('_disabled_16','_16'));
		});

		$("#vboxVMBootOrderList").children("li").click(function() {

			// Update class
			$(this).siblings().prop('className','vboxListItem');
			$(this).prop('className','vboxListItemSelected');

			var isFirst = ($(this).parent().children().first().attr('id') == $(this).attr('id'));
			var isLast = ($(this).parent().children().last().attr('id') == $(this).attr('id'));
			
			// update buttons
			$(this).closest("table").find('input.imgMvUp').css('background-image', 'url(images/vbox/list_moveup' + (isFirst ? '_disabled' : '') + '_16px.png)').prop('disabled', isFirst);
			$(this).closest("table").find('input.imgMvDn').css('background-image', 'url(images/vbox/list_movedown' + (isLast ? '_disabled' : '') + '_16px.png)').prop('disabled', isLast);
							
		}).first().trigger('click');
		
	}
	
});

/* Disable non-editable items when VM is running */
$('#vboxSettingsDialog').one('show',function(){
	
	// Are virtualExtensions supported by the cpu?
	if(!$('#vboxSettingsDialog').data('vboxHostDetails').cpuFeatures.HWVirtEx && !$('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.Enabled) {
	    
	    $('#vboxSettingsTabSystemAcceleration').find('input.vboxSettingsAccelRequired').prop('disabled', true);
	    $('#vboxSettingsTabSystemAcceleration').find('.vboxSettingsAccelRequired').addClass('vboxDisabled');
	}


});


/* Change general settings onSave() */
$('#vboxSettingsDialog').on('save',function(){

	$('#vboxSettingsDialog').data('vboxMachineData').memorySize = parseInt(document.forms['frmVboxSettings'].vboxSettingsSystemMemoryValue.value);
	$('#vboxSettingsDialog').data('vboxMachineData').BIOSSettings.IOAPICEnabled = document.forms['frmVboxSettings'].vboxSettingsSystemIOAPIC.checked;
	$('#vboxSettingsDialog').data('vboxMachineData').firmwareType = (document.forms['frmVboxSettings'].vboxSettingsSystemEFI.checked ? 'EFI' : 'BIOS');
	$('#vboxSettingsDialog').data('vboxMachineData').CPUCount = parseInt($('#vboxSettingsSystemProcessor').slider('value'));
	$('#vboxSettingsDialog').data('vboxMachineData').CPUExecutionCap = parseInt($('#vboxSettingsSystemProcessorCap').slider('value'));
	$('#vboxSettingsDialog').data('vboxMachineData').CpuProperties.PAE = document.forms['frmVboxSettings'].vboxSettingsSystemPAE.checked;
	$('#vboxSettingsDialog').data('vboxMachineData').CpuProperties.HWVirt = document.forms['frmVboxSettings'].vboxSettingsSystemNestedVT.checked;
	$('#vboxSettingsDialog').data('vboxMachineData').RTCUseUTC = document.forms['frmVboxSettings'].vboxSettingsSystemRTCUseUTC.checked;

	/* Only if we had a chipset */
	if($('#vboxSettingsDialog').data('vboxMachineData').chipsetType)
		$('#vboxSettingsDialog').data('vboxMachineData').chipsetType = $(document.forms['frmVboxSettings'].vboxSettingsSystemChipset).val();
		
	if($('#vboxSettingsDialog').data('vboxHostDetails').cpuFeatures.HWVirtEx || $('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.Enabled || $('#vboxPane').data('vboxConfig').enableAdvancedConfig) {
		$('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.Enabled = document.forms['frmVboxSettings'].settingsSystemVT.checked;
		$('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.NestedPaging = $('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.Enabled && document.forms['frmVboxSettings'].settingsSystemPaging.checked;
	}
	
	 $('#vboxSettingsDialog').data('vboxMachineData').paravirtProvider = $(document.forms['frmVboxSettings'].vboxSettingsParavirtInterface).val();
	
	/* Only if advanced config is enabled */
	if($('#vboxPane').data('vboxConfig').enableAdvancedConfig) {
		$('#vboxSettingsDialog').data('vboxMachineData').pageFusionEnabled = document.forms['frmVboxSettings'].vboxSettingsSystemPageFusion.checked;
		$('#vboxSettingsDialog').data('vboxMachineData').HPETEnabled = document.forms['frmVboxSettings'].vboxSettingsSystemHPET.checked;
		$('#vboxSettingsDialog').data('vboxMachineData').disableHostTimeSync = document.forms['frmVboxSettings'].vboxSettingsSystemDisableHostTimeSync.checked;
		$('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.LargePages = document.forms['frmVboxSettings'].settingsSystemLargePages.checked;
		$('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.UnrestrictedExecution = ($('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.Enabled && document.forms['frmVboxSettings'].settingsSystemUnrestrictedExecution.checked ? true : false);
		$('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.VPID = $('#vboxSettingsDialog').data('vboxMachineData').HWVirtExProperties.Enabled && document.forms['frmVboxSettings'].settingsSystemVPID.checked;
	}
	
	// Boot order
	$('#vboxSettingsDialog').data('vboxMachineData').bootOrder = new Array();
	$('#vboxVMBootOrderList').find('input').each(function(){
		if(!$(this).prop('checked')) return;
		$('#vboxSettingsDialog').data('vboxMachineData').bootOrder[$('#vboxSettingsDialog').data('vboxMachineData').bootOrder.length] = $(this).attr('name').substring(16);
	});
		
});



</script>
